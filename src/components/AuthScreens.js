import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { CURRENCIES, LANGUAGES } from '../services/translationService';
import { Logo } from './Logo';
import { useToast } from './ToastContext';
// --- Shared Layout (Moved Outside) ---
const AuthLayout = ({ children, title, subtitle }) => (_jsxs("div", { className: "min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-950 p-4 transition-colors duration-300", children: [_jsxs("div", { className: "bg-white dark:bg-slate-900 p-8 md:p-10 rounded-3xl shadow-2xl shadow-slate-200/50 dark:shadow-black/50 w-full max-w-md border border-slate-100 dark:border-slate-800 transition-all duration-300 animate-scaleIn", children: [_jsxs("div", { className: "text-center mb-8", children: [_jsx("div", { className: "flex justify-center mb-4", children: _jsx(Logo, { className: "w-16 h-16 shadow-lg shadow-blue-500/20 rounded-2xl" }) }), _jsx("h1", { className: "text-2xl font-bold text-slate-900 dark:text-white tracking-tight", children: title }), _jsx("p", { className: "text-slate-500 dark:text-slate-400 text-sm mt-1 font-medium", children: subtitle })] }), children] }), _jsxs("div", { className: "absolute bottom-4 text-center w-full text-slate-400 dark:text-slate-600 text-xs", children: ["\u00A9 ", new Date().getFullYear(), " Biz-flow. Global Invoicing."] })] }));
export const AuthScreens = ({ onLogin, onRegister, onGoogleLogin, view, setView, isLoading = false, onGuestAccess, onInstall, showInstallButton }) => {
    const [loginData, setLoginData] = useState({ email: '', password: '' });
    const [registerData, setRegisterData] = useState({
        name: '',
        email: '',
        password: '',
        companyName: '',
        currency: 'MZN',
        language: 'pt',
        logo: ''
    });
    // Use Toast Hook
    const { notify } = useToast();
    const handleLogoUpload = (e) => {
        const file = e.target.files?.[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = () => {
                setRegisterData(prev => ({ ...prev, logo: reader.result }));
            };
            reader.readAsDataURL(file);
        }
    };
    const handleSubmitRegister = (e) => {
        e.preventDefault();
        onRegister(registerData.email, registerData.password, registerData);
    };
    const handleSubmitLogin = (e) => {
        e.preventDefault();
        onLogin(loginData.email, loginData.password);
    };
    const handleForgotSubmit = (e) => {
        e.preventDefault();
        notify("Funcionalidade em desenvolvimento. Link de recuperação simulado enviado.", 'info');
        setView('login');
    };
    // --- GOOGLE BUTTON COMPONENT ---
    const GoogleButton = () => (_jsxs("div", { className: "mt-6", children: [_jsxs("div", { className: "relative mb-6", children: [_jsx("div", { className: "absolute inset-0 flex items-center", children: _jsx("div", { className: "w-full border-t border-slate-200 dark:border-slate-700" }) }), _jsx("div", { className: "relative flex justify-center text-sm", children: _jsx("span", { className: "px-2 bg-white dark:bg-slate-900 text-slate-500", children: "Ou continue com" }) })] }), _jsxs("button", { type: "button", onClick: onGoogleLogin, className: "w-full bg-white dark:bg-slate-800 text-slate-700 dark:text-white border border-slate-200 dark:border-slate-700 font-bold py-3 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition-all flex items-center justify-center gap-3", children: [_jsx("img", { src: "https://www.svgrepo.com/show/475656/google-color.svg", alt: "Google", className: "w-5 h-5" }), "Google"] })] }));
    // --- VIEWS ---
    if (view === 'login') {
        return (_jsxs(AuthLayout, { title: "Bem-vindo ao Biz-flow", subtitle: "Acesse sua conta", children: [_jsxs("form", { onSubmit: handleSubmitLogin, className: "space-y-5", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase mb-1.5", children: "Email" }), _jsxs("div", { className: "relative", children: [_jsx("i", { className: "fa-solid fa-envelope absolute left-3 top-3.5 text-slate-400" }), _jsx("input", { type: "email", required: true, className: "w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl pl-10 pr-4 py-3 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white transition-all placeholder:text-slate-400", placeholder: "nome@exemplo.com", value: loginData.email, onChange: e => setLoginData({ ...loginData, email: e.target.value }) })] })] }), _jsxs("div", { children: [_jsxs("div", { className: "flex justify-between items-center mb-1.5", children: [_jsx("label", { className: "block text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase", children: "Palavra-passe" }), _jsx("button", { type: "button", onClick: () => setView('forgotPassword'), className: "text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium", children: "Esqueceu?" })] }), _jsxs("div", { className: "relative", children: [_jsx("i", { className: "fa-solid fa-lock absolute left-3 top-3.5 text-slate-400" }), _jsx("input", { type: "password", required: true, className: "w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl pl-10 pr-4 py-3 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white transition-all placeholder:text-slate-400", placeholder: "\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022", value: loginData.password, onChange: e => setLoginData({ ...loginData, password: e.target.value }) })] })] }), _jsxs("button", { disabled: isLoading, className: "w-full bg-slate-900 dark:bg-blue-600 text-white font-semibold py-3.5 rounded-xl hover:bg-slate-800 dark:hover:bg-blue-700 transition-all shadow-lg shadow-slate-900/20 active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-2", children: [isLoading && _jsx("i", { className: "fa-solid fa-circle-notch animate-spin" }), isLoading ? 'Entrando...' : 'Entrar'] })] }), _jsxs("div", { className: "mt-4 space-y-3", children: [showInstallButton && onInstall && (_jsxs("button", { type: "button", onClick: onInstall, className: "w-full bg-blue-50 dark:bg-blue-900/10 text-blue-600 dark:text-blue-400 border border-blue-200 dark:border-blue-800 font-bold py-3 rounded-xl hover:bg-blue-100 dark:hover:bg-blue-900/20 transition-all flex items-center justify-center gap-2", children: [_jsx("i", { className: "fa-solid fa-download" }), " Instalar App"] })), _jsxs("button", { type: "button", onClick: onGuestAccess, className: "w-full bg-emerald-50 dark:bg-emerald-900/10 text-emerald-600 dark:text-emerald-400 border border-emerald-200 dark:border-emerald-800 font-bold py-3 rounded-xl hover:bg-emerald-100 dark:hover:bg-emerald-900/20 transition-all flex items-center justify-center gap-2", children: [_jsx("i", { className: "fa-solid fa-bolt" }), " Biz-flow (Modo Simples)"] })] }), _jsx(GoogleButton, {}), _jsxs("div", { className: "mt-8 pt-6 border-t border-slate-100 dark:border-slate-800", children: [_jsx("p", { className: "text-center text-slate-500 dark:text-slate-400 text-sm mb-3", children: "N\u00E3o tem uma conta Biz-flow?" }), _jsxs("button", { onClick: () => setView('register'), className: "w-full bg-white dark:bg-slate-800 text-blue-600 dark:text-blue-400 border-2 border-blue-100 dark:border-slate-700 font-bold py-3 rounded-xl hover:border-blue-600 hover:bg-blue-50 dark:hover:bg-slate-700 transition-all shadow-sm flex items-center justify-center gap-2 group", children: ["Criar conta gr\u00E1tis", _jsx("i", { className: "fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform" })] })] })] }));
    }
    if (view === 'forgotPassword') {
        return (_jsxs(AuthLayout, { title: "Recuperar Acesso", subtitle: "Enviaremos um link para seu email", children: [_jsxs("form", { onSubmit: handleForgotSubmit, className: "space-y-5", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase mb-1.5", children: "Email" }), _jsxs("div", { className: "relative", children: [_jsx("i", { className: "fa-solid fa-envelope absolute left-3 top-3.5 text-slate-400" }), _jsx("input", { type: "email", required: true, className: "w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl pl-10 pr-4 py-3 outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white", placeholder: "nome@exemplo.com" })] })] }), _jsx("button", { className: "w-full bg-slate-900 dark:bg-blue-600 text-white font-semibold py-3.5 rounded-xl hover:bg-slate-800 dark:hover:bg-blue-700 transition-all shadow-lg shadow-slate-900/20", children: "Enviar Link" })] }), _jsx("div", { className: "mt-6 text-center", children: _jsxs("button", { onClick: () => setView('login'), className: "text-slate-500 dark:text-slate-400 text-sm hover:text-slate-900 dark:hover:text-white font-medium flex items-center justify-center gap-2", children: [_jsx("i", { className: "fa-solid fa-arrow-left" }), " Voltar ao Login"] }) })] }));
    }
    // Register View
    return (_jsxs(AuthLayout, { title: "Criar Conta", subtitle: "Configure seu perfil profissional", children: [_jsxs("form", { onSubmit: handleSubmitRegister, className: "space-y-4", children: [_jsx("div", { className: "flex justify-center mb-6", children: _jsxs("div", { className: "relative group cursor-pointer", children: [_jsx("div", { className: "w-20 h-20 rounded-full bg-slate-50 dark:bg-slate-800 border-2 border-dashed border-slate-300 dark:border-slate-600 flex items-center justify-center overflow-hidden hover:border-blue-500 transition-colors shadow-inner", children: registerData.logo ? (_jsx("img", { src: registerData.logo, alt: "Logo", className: "w-full h-full object-contain" })) : (_jsx("i", { className: "fa-solid fa-camera text-slate-300 dark:text-slate-500 text-xl group-hover:text-blue-500 transition-colors" })) }), _jsx("input", { type: "file", accept: "image/*", onChange: handleLogoUpload, className: "absolute inset-0 opacity-0 cursor-pointer" }), !registerData.logo && _jsx("span", { className: "absolute -bottom-6 text-[10px] text-slate-400 uppercase font-bold", children: "Add Logo" })] }) }), _jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { className: "relative", children: [_jsx("i", { className: "fa-solid fa-user absolute left-3 top-3.5 text-slate-400 text-xs" }), _jsx("input", { required: true, placeholder: "Seu Nome", className: "w-full bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-xl pl-8 pr-3 py-3 text-sm outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white", value: registerData.name, onChange: e => setRegisterData({ ...registerData, name: e.target.value }) })] }), _jsxs("div", { className: "relative", children: [_jsx("i", { className: "fa-solid fa-building absolute left-3 top-3.5 text-slate-400 text-xs" }), _jsx("input", { required: true, placeholder: "Empresa", className: "w-full bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-xl pl-8 pr-3 py-3 text-sm outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white", value: registerData.companyName, onChange: e => setRegisterData({ ...registerData, companyName: e.target.value }) })] })] }), _jsxs("div", { className: "relative", children: [_jsx("i", { className: "fa-solid fa-envelope absolute left-3 top-3.5 text-slate-400 text-xs" }), _jsx("input", { required: true, type: "email", placeholder: "Email", className: "w-full bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-xl pl-8 pr-3 py-3 text-sm outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white", value: registerData.email, onChange: e => setRegisterData({ ...registerData, email: e.target.value }) })] }), _jsxs("div", { className: "relative", children: [_jsx("i", { className: "fa-solid fa-lock absolute left-3 top-3.5 text-slate-400 text-xs" }), _jsx("input", { required: true, type: "password", placeholder: "Senha", className: "w-full bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700 rounded-xl pl-8 pr-3 py-3 text-sm outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white", value: registerData.password, onChange: e => setRegisterData({ ...registerData, password: e.target.value }) })] }), _jsxs("div", { className: "grid grid-cols-2 gap-4 pt-2", children: [_jsxs("div", { children: [_jsx("label", { className: "text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider", children: "Moeda" }), _jsxs("div", { className: "relative", children: [_jsx("select", { value: registerData.currency, onChange: e => setRegisterData({ ...registerData, currency: e.target.value }), className: "w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg pl-2 py-2.5 text-sm mt-1 dark:text-white appearance-none", children: CURRENCIES.map(c => _jsxs("option", { value: c.code, children: [c.flag, " ", c.name, " (", c.code, ")"] }, c.code)) }), _jsx("i", { className: "fa-solid fa-chevron-down absolute right-3 top-4 text-slate-400 text-xs pointer-events-none" })] })] }), _jsxs("div", { children: [_jsx("label", { className: "text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider", children: "Idioma" }), _jsxs("div", { className: "relative", children: [_jsx("select", { value: registerData.language, onChange: e => setRegisterData({ ...registerData, language: e.target.value }), className: "w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg pl-2 py-2.5 text-sm mt-1 dark:text-white appearance-none", children: LANGUAGES.map(l => _jsxs("option", { value: l.code, children: [l.flag, " ", l.name] }, l.code)) }), _jsx("i", { className: "fa-solid fa-chevron-down absolute right-3 top-4 text-slate-400 text-xs pointer-events-none" })] })] })] }), _jsxs("button", { disabled: isLoading, className: "w-full bg-blue-600 text-white font-semibold py-3.5 rounded-xl hover:bg-blue-700 transition-all shadow-lg shadow-blue-600/20 mt-2 flex items-center justify-center gap-2 disabled:opacity-70", children: [isLoading && _jsx("i", { className: "fa-solid fa-circle-notch animate-spin" }), isLoading ? 'Criando Conta...' : 'Começar Agora'] })] }), _jsx(GoogleButton, {}), _jsx("div", { className: "mt-4 text-center", children: _jsx("button", { onClick: () => setView('login'), className: "text-slate-500 dark:text-slate-400 text-xs hover:text-slate-900 dark:hover:text-white font-medium", children: "J\u00E1 tem conta? Entrar" }) })] }));
};
