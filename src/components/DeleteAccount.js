import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { Logo } from './Logo';
import { useToast } from './ToastContext';
export const DeleteAccount = ({ onBack }) => {
    const [email, setEmail] = useState('');
    const [reason, setReason] = useState('');
    const [isSubmitted, setIsSubmitted] = useState(false);
    const { notify } = useToast();
    const handleSubmit = (e) => {
        e.preventDefault();
        // In a real scenario, this would call a Supabase Edge Function to flag the account.
        // For compliance, providing a manual contact method mechanism is often sufficient if automated is not available.
        setIsSubmitted(true);
        notify("Solicitação registada.", "info");
    };
    const handleMailTo = () => {
        const subject = `Solicitação de Exclusão de Dados - ${email}`;
        const body = `Olá Equipa Biz-Flow,%0D%0A%0D%0AGostaria de solicitar a exclusão completa da minha conta e dados associados.%0D%0A%0D%0AEmail da conta: ${email}%0D%0AMotivo: ${reason}%0D%0A%0D%0AObrigado.`;
        window.open(`mailto:suporte@biz-flow.cloud?subject=${subject}&body=${body}`);
    };
    return (_jsx("div", { className: "min-h-screen bg-slate-50 dark:bg-slate-950 flex flex-col items-center justify-center p-4", children: _jsxs("div", { className: "w-full max-w-md bg-white dark:bg-slate-900 rounded-3xl shadow-xl border border-slate-200 dark:border-slate-800 p-8 animate-scaleIn", children: [_jsx("div", { className: "flex justify-center mb-6", children: _jsx(Logo, { className: "w-16 h-16" }) }), _jsx("h1", { className: "text-2xl font-black text-center text-slate-900 dark:text-white mb-2", children: "Exclus\u00E3o de Dados" }), _jsx("p", { className: "text-center text-slate-500 dark:text-slate-400 text-sm mb-8", children: "Conforme exigido pelas normas de privacidade, voc\u00EA pode solicitar a remo\u00E7\u00E3o completa da sua conta e dados." }), !isSubmitted ? (_jsxs("form", { onSubmit: handleSubmit, className: "space-y-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-xs font-bold text-slate-500 uppercase mb-1", children: "Email da Conta" }), _jsx("input", { type: "email", required: true, value: email, onChange: (e) => setEmail(e.target.value), className: "w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-3 outline-none focus:border-blue-500 dark:text-white", placeholder: "seu@email.com" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-xs font-bold text-slate-500 uppercase mb-1", children: "Motivo (Opcional)" }), _jsx("textarea", { value: reason, onChange: (e) => setReason(e.target.value), className: "w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-3 outline-none focus:border-blue-500 dark:text-white resize-none h-24", placeholder: "Por que voc\u00EA est\u00E1 nos deixando?" })] }), _jsxs("div", { className: "bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800 rounded-xl p-4 text-xs text-amber-800 dark:text-amber-200 mb-4", children: [_jsx("i", { className: "fa-solid fa-triangle-exclamation mr-2" }), "Aten\u00E7\u00E3o: Esta a\u00E7\u00E3o \u00E9 irrevers\u00EDvel. Todos os seus recibos, clientes e hist\u00F3rico financeiro ser\u00E3o apagados permanentemente em at\u00E9 30 dias."] }), _jsx("button", { type: "submit", className: "w-full bg-red-600 text-white font-bold py-3 rounded-xl hover:bg-red-700 transition shadow-lg shadow-red-600/20", children: "Solicitar Exclus\u00E3o" }), _jsx("button", { type: "button", onClick: onBack, className: "w-full text-slate-500 text-sm font-bold py-3 hover:text-slate-800 dark:hover:text-white transition", children: "Cancelar" })] })) : (_jsxs("div", { className: "text-center space-y-6", children: [_jsx("div", { className: "w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto text-3xl", children: _jsx("i", { className: "fa-solid fa-check" }) }), _jsxs("div", { children: [_jsx("h3", { className: "font-bold text-slate-900 dark:text-white text-lg", children: "Solicita\u00E7\u00E3o Iniciada" }), _jsx("p", { className: "text-slate-500 dark:text-slate-400 text-sm mt-2", children: "Para confirmar sua identidade e finalizar o processo, clique no bot\u00E3o abaixo para enviar o email de confirma\u00E7\u00E3o oficial." })] }), _jsxs("button", { onClick: handleMailTo, className: "w-full bg-slate-900 dark:bg-blue-600 text-white font-bold py-3 rounded-xl hover:opacity-90 transition flex items-center justify-center gap-2", children: [_jsx("i", { className: "fa-solid fa-envelope" }), " Confirmar via Email"] }), _jsx("button", { onClick: () => setIsSubmitted(false), className: "text-sm text-slate-400 underline", children: "Voltar" })] }))] }) }));
};
