import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
// --- HELPER COMPONENTS (Moved outside to prevent re-render focus loss) ---
const Section = ({ title, icon, children, action }) => (_jsxs("div", { className: "bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 overflow-hidden mb-6 animate-fadeIn", children: [_jsxs("div", { className: "bg-slate-50 dark:bg-slate-800 px-5 py-3 border-b border-slate-100 dark:border-slate-700 flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-2.5", children: [_jsx("div", { className: "w-6 h-6 rounded bg-white dark:bg-slate-700 flex items-center justify-center shadow-sm text-blue-500 text-xs", children: _jsx("i", { className: `fa-solid ${icon}` }) }), _jsx("h3", { className: "text-xs font-bold text-slate-700 dark:text-slate-200 uppercase tracking-wider", children: title })] }), action && _jsx("div", { children: action })] }), _jsx("div", { className: "p-5 space-y-4", children: children })] }));
const Input = ({ label, icon, ...props }) => (_jsxs("div", { className: "relative", children: [label && _jsx("label", { className: "block text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-1.5", children: label }), _jsxs("div", { className: "relative", children: [icon && (_jsx("div", { className: "absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 text-sm pointer-events-none", children: _jsx("i", { className: `fa-solid ${icon}` }) })), _jsx("input", { ...props, className: `w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg ${icon ? 'pl-9 pr-3' : 'px-3'} py-2.5 text-sm outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:text-white transition-all placeholder:text-slate-400` })] })] }));
// --- MAIN COMPONENT ---
export const EditorForm = ({ formData, onChange, newItem, onNewItemChange, onAddItem, onRemoveItem, onEnhanceDescription, isEnhancing, t, fMoney, onInitNew, onSign, statusOptions, onClearClient, savedClients, savedProducts, onConvertQuote }) => {
    return (_jsxs("div", { className: "space-y-6 animate-slideUp", children: [_jsxs("div", { className: "bg-slate-100 dark:bg-slate-800 p-1.5 rounded-xl flex text-sm font-bold shadow-inner", children: [_jsxs("button", { onClick: () => formData.type !== 'INVOICE' && onInitNew('INVOICE'), className: `flex-1 py-2.5 rounded-lg transition-all flex items-center justify-center gap-2 ${formData.type === 'INVOICE' ? 'bg-white dark:bg-slate-700 text-blue-600 dark:text-white shadow-sm ring-1 ring-black/5' : 'text-slate-400 hover:text-slate-600 dark:hover:text-slate-300'}`, children: [_jsx("i", { className: "fa-solid fa-file-invoice" }), " ", t('invoice')] }), _jsxs("button", { onClick: () => formData.type !== 'RECEIPT' && onInitNew('RECEIPT'), className: `flex-1 py-2.5 rounded-lg transition-all flex items-center justify-center gap-2 ${formData.type === 'RECEIPT' ? 'bg-white dark:bg-slate-700 text-emerald-600 dark:text-white shadow-sm ring-1 ring-black/5' : 'text-slate-400 hover:text-slate-600 dark:hover:text-slate-300'}`, children: [_jsx("i", { className: "fa-solid fa-receipt" }), " ", t('receipt')] }), _jsxs("button", { onClick: () => formData.type !== 'QUOTE' && onInitNew('QUOTE'), className: `flex-1 py-2.5 rounded-lg transition-all flex items-center justify-center gap-2 ${formData.type === 'QUOTE' ? 'bg-white dark:bg-slate-700 text-purple-600 dark:text-white shadow-sm ring-1 ring-black/5' : 'text-slate-400 hover:text-slate-600 dark:hover:text-slate-300'}`, children: [_jsx("i", { className: "fa-solid fa-clipboard-list" }), " ", t('quote')] })] }), formData.type === 'QUOTE' && onConvertQuote && (_jsxs("div", { className: "bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-100 dark:border-blue-800 p-4 rounded-xl flex justify-between items-center animate-fadeIn", children: [_jsxs("div", { className: "text-sm text-blue-800 dark:text-blue-200 font-medium flex items-center gap-2", children: [_jsx("i", { className: "fa-solid fa-circle-info" }), " Or\u00E7amento Provis\u00F3rio"] }), _jsx("button", { onClick: onConvertQuote, className: "bg-blue-600 text-white px-4 py-1.5 rounded-lg text-xs font-bold hover:bg-blue-700 shadow-lg shadow-blue-600/20 transition-transform hover:scale-105", children: t('convertToInvoice') })] })), _jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsx(Input, { type: "date", name: "date", value: formData.date, onChange: onChange, label: t('date'), icon: "fa-calendar" }), (formData.type === 'INVOICE' || formData.type === 'QUOTE') && (_jsx(Input, { type: "date", name: "dueDate", value: formData.dueDate || '', onChange: onChange, label: formData.type === 'QUOTE' ? t('validUntil') : t('dueDate'), icon: "fa-hourglass-half", style: { borderColor: '#FECACA' } }))] }), _jsxs(Section, { title: t('client'), icon: "fa-user-tie", action: _jsxs("button", { onClick: onClearClient, className: "text-xs font-bold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-1 bg-blue-50 dark:bg-blue-900/30 px-2.5 py-1 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors", children: [_jsx("i", { className: "fa-solid fa-plus" }), " ", t('addClient')] }), children: [_jsx(Input, { name: "clientName", value: formData.clientName, onChange: onChange, placeholder: "Nome do Cliente / Empresa", list: "client-list", autoComplete: "off", icon: "fa-magnifying-glass" }), _jsx("datalist", { id: "client-list", children: savedClients.map((c, i) => _jsx("option", { value: c.name }, i)) }), _jsxs("div", { className: "grid grid-cols-1 sm:grid-cols-2 gap-4", children: [_jsx(Input, { name: "clientContact", value: formData.clientContact, onChange: onChange, placeholder: "Email / Telefone", icon: "fa-address-book" }), _jsx(Input, { name: "clientNuit", value: formData.clientNuit, onChange: onChange, placeholder: "Tax ID / Reg. No.", icon: "fa-id-card" })] }), _jsx(Input, { name: "clientLocation", value: formData.clientLocation, onChange: onChange, placeholder: "Endere\u00E7o / Cidade", icon: "fa-location-dot" })] }), _jsxs(Section, { title: t('items'), icon: "fa-boxes-stacked", children: [_jsxs("div", { className: "space-y-2", children: [formData.items.map((item) => (_jsxs("div", { className: "flex items-start justify-between group p-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg transition-all border border-transparent hover:border-slate-200 dark:hover:border-slate-700", children: [_jsxs("div", { className: "flex-1", children: [_jsx("p", { className: "font-bold text-slate-800 dark:text-slate-200 text-sm", children: item.description }), _jsxs("p", { className: "text-xs text-slate-400 mt-1 flex items-center gap-2", children: [_jsx("span", { className: "bg-slate-100 dark:bg-slate-700 px-1.5 rounded", children: item.quantity }), " x ", fMoney(item.unitPrice)] })] }), _jsxs("div", { className: "text-right pl-4", children: [_jsx("p", { className: "font-bold text-slate-700 dark:text-slate-300 text-sm font-mono", children: fMoney(item.total) }), _jsx("button", { onClick: () => onRemoveItem(item.id), className: "text-xs text-red-400 hover:text-red-600 mt-1 opacity-0 group-hover:opacity-100 transition-opacity", children: _jsx("i", { className: "fa-solid fa-trash" }) })] })] }, item.id))), formData.items.length === 0 && _jsx("div", { className: "text-center py-6 text-slate-400 text-sm italic bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-dashed border-slate-200 dark:border-slate-700", children: "Nenhum item adicionado" })] }), _jsxs("div", { className: "bg-slate-50 dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mt-4 shadow-sm", children: [_jsxs("div", { className: "flex gap-2 mb-3", children: [_jsxs("div", { className: "flex-1 relative", children: [_jsx("input", { name: "description", value: newItem.description, onChange: onNewItemChange, placeholder: t('description'), className: "w-full bg-white dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-lg p-2.5 pl-3 text-sm outline-none focus:border-blue-500 transition-colors", list: "product-list", autoComplete: "off" }), _jsx("datalist", { id: "product-list", children: savedProducts.map((p, i) => _jsx("option", { value: p.description }, i)) })] }), _jsx("button", { onClick: onEnhanceDescription, disabled: isEnhancing || !newItem.description, className: "w-10 flex items-center justify-center bg-white dark:bg-slate-700 border border-indigo-100 dark:border-indigo-900 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/50 transition", title: "Melhorar com IA", children: isEnhancing ? _jsx("i", { className: "fa-solid fa-spinner animate-spin" }) : _jsx("i", { className: "fa-solid fa-wand-magic-sparkles" }) })] }), _jsxs("div", { className: "flex gap-2 items-stretch", children: [_jsx("input", { type: "number", name: "quantity", min: "1", value: newItem.quantity, onChange: onNewItemChange, className: "w-[70px] bg-white dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-lg p-2.5 text-sm text-center focus:ring-2 focus:ring-blue-500/20 outline-none", placeholder: "Qtd" }), _jsxs("div", { className: "flex flex-1 relative isolate min-w-0", children: [_jsx("input", { type: "number", name: "unitPrice", min: "0", value: newItem.unitPrice, onChange: onNewItemChange, className: "flex-1 min-w-0 bg-white dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-l-lg rounded-r-none border-r-0 p-2.5 text-sm focus:z-10 focus:ring-2 focus:ring-blue-500/20 outline-none", placeholder: "Pre\u00E7o" }), _jsx("button", { onClick: onAddItem, className: "flex-none w-14 bg-blue-600 text-white rounded-r-lg rounded-l-none text-sm font-bold hover:bg-blue-700 transition-all shadow-lg shadow-blue-600/20 flex items-center justify-center z-0 active:bg-blue-800", title: "Adicionar", children: _jsx("i", { className: "fa-solid fa-plus text-lg" }) })] })] })] })] }), _jsxs(Section, { title: "Totais & Estado", icon: "fa-calculator", children: [_jsxs("div", { className: "space-y-3 text-sm", children: [_jsxs("div", { className: "flex justify-between text-slate-500 dark:text-slate-400", children: [_jsx("span", { children: t('subtotal') }), _jsx("span", { className: "font-mono font-medium", children: fMoney(formData.subtotal) })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("span", { className: "text-slate-500 dark:text-slate-400 flex items-center gap-2", children: [t('tax'), " %", _jsx("input", { type: "number", name: "taxRate", value: formData.taxRate, onChange: onChange, className: "w-14 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded px-1 py-0.5 text-center text-xs font-bold" })] }), _jsxs("span", { className: "font-mono text-slate-700 dark:text-slate-300", children: ["+ ", fMoney(formData.taxAmount)] })] }), _jsxs("div", { className: "flex justify-between items-center", children: [_jsxs("span", { className: "text-slate-500 dark:text-slate-400 flex items-center gap-2", children: [t('discount'), _jsx("input", { type: "number", name: "discount", value: formData.discount, onChange: onChange, className: "w-16 bg-slate-50 dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded px-1 py-0.5 text-center text-xs font-bold" })] }), _jsxs("span", { className: "font-mono text-green-600 dark:text-green-400", children: ["- ", fMoney(formData.discount)] })] }), _jsxs("div", { className: "flex justify-between items-center pt-4 border-t border-dashed border-slate-200 dark:border-slate-700 mt-2", children: [_jsx("span", { className: "font-bold text-slate-900 dark:text-white text-base uppercase tracking-tight", children: t('finalTotal') }), _jsx("span", { className: "font-black text-blue-600 dark:text-blue-400 text-2xl tracking-tight", children: fMoney(formData.total) })] })] }), _jsxs("div", { className: "pt-4 grid grid-cols-2 gap-4 mt-2", children: [_jsxs("div", { children: [_jsx("label", { className: "text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1.5 block", children: t('status') }), _jsxs("div", { className: "relative", children: [_jsx("i", { className: "fa-solid fa-tag absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 text-xs" }), _jsx("select", { name: "stampText", value: formData.stampText || '', onChange: onChange, className: "w-full bg-white dark:bg-slate-700 dark:text-white border border-slate-200 dark:border-slate-600 rounded-lg pl-8 pr-2 py-2.5 text-sm font-medium appearance-none cursor-pointer hover:border-slate-300 transition-colors", children: statusOptions.map(opt => _jsx("option", { value: opt, children: opt }, opt)) })] })] }), _jsxs("button", { onClick: onSign, className: `w-full mt-auto h-[42px] rounded-lg text-sm font-bold border transition-all flex items-center justify-center gap-2 shadow-sm ${formData.signatureData ? 'bg-emerald-50 text-emerald-600 border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800' : 'bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-400 border-slate-200 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700'}`, children: [_jsx("i", { className: "fa-solid fa-pen-nib" }), " ", formData.signatureData ? 'Assinado' : 'Assinar'] })] })] })] }));
};
