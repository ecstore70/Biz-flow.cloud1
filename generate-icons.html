<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de √çcones PWA (Corrigido)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', sans-serif; }</style>
</head>
<body class="bg-slate-100 min-h-screen flex flex-col items-center justify-center p-6 text-slate-800">
    
    <div class="bg-white p-8 rounded-3xl shadow-xl max-w-lg w-full text-center border border-slate-200">
        <h1 class="text-3xl font-black text-slate-900 mb-2">√çcones PWA</h1>
        <p class="text-slate-500 mb-6 text-sm">Gera √≠cones <strong>QUADRADOS</strong>. O Android e iOS arredondam os cantos automaticamente.</p>

        <div class="flex flex-col gap-4 mb-8">
            <button onclick="downloadIcon(192)" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-2xl transition-all flex items-center justify-center gap-3 shadow-lg shadow-blue-600/30 transform hover:-translate-y-1">
                <span class="text-2xl">üì±</span>
                <div class="text-left">
                    <span class="block text-xs opacity-80 uppercase tracking-wider font-medium">Passo 1</span>
                    <span class="text-lg">Baixar pwa-192.png</span>
                </div>
            </button>
            <button onclick="downloadIcon(512)" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-2xl transition-all flex items-center justify-center gap-3 shadow-lg shadow-indigo-600/30 transform hover:-translate-y-1">
                <span class="text-2xl">üñ•Ô∏è</span>
                <div class="text-left">
                    <span class="block text-xs opacity-80 uppercase tracking-wider font-medium">Passo 2</span>
                    <span class="text-lg">Baixar pwa-512.png</span>
                </div>
            </button>
        </div>

        <div class="bg-amber-50 border border-amber-100 rounded-xl p-4 mb-6 text-left">
            <p class="text-xs text-amber-800 font-bold mb-1">Nota Importante:</p>
            <p class="text-xs text-amber-700">
                Os √≠cones gerados ser√£o quadrados preenchidos. Isso √© <strong>CORRETO</strong> para PWAs ("Maskable Icons"). Se voc√™ usar √≠cones redondos aqui, seu app ficar√° com bordas brancas feias no celular.
            </p>
        </div>

        <div class="border-t border-slate-100 pt-6">
            <p class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Pr√©via (192x192)</p>
            <div class="flex justify-center">
                <div id="preview-container" class="shadow-lg border border-slate-200">
                    <!-- SVG Renderizado Aqui -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Design SVG Ajustado para PWA (Quadrado e Elementos Centralizados na Safe Zone)
        const svgContent = `
        <svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="bizflow_grad" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#38bdf8" />
              <stop offset="100%" stop-color="#2563EB" />
            </linearGradient>
          </defs>
          <!-- Fundo QUADRADO (Sem rx) para preencher todo o √≠cone maskable -->
          <rect x="0" y="0" width="512" height="512" fill="url(#bizflow_grad)" />
          
          <!-- Conte√∫do Escalado para 85% para garantir que fique na Safe Zone circular -->
          <g transform="translate(38, 38) scale(0.85)">
            <path d="M110 160 H 402" stroke="white" stroke-width="45" stroke-linecap="round" />
            <path d="M110 266 H 402" stroke="white" stroke-width="45" stroke-linecap="round" opacity="0.85" />
            <path d="M110 372 H 260" stroke="white" stroke-width="45" stroke-linecap="round" opacity="0.7" />
            <circle cx="382" cy="382" r="90" fill="white" />
            <g transform="translate(382, 382) scale(0.9)">
                <path d="M-25 25 L35 -35" stroke="#2563EB" stroke-width="30" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M-15 -35 H35 V15" stroke="#2563EB" stroke-width="30" stroke-linecap="round" stroke-linejoin="round" />
            </g>
          </g>
        </svg>
        `;

        document.getElementById('preview-container').innerHTML = svgContent.replace('width="512"', 'width="192"').replace('height="512"', 'height="192"');

        function downloadIcon(size) {
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            const svgBlob = new Blob([svgContent], {type: 'image/svg+xml;charset=utf-8'});
            const url = URL.createObjectURL(svgBlob);
            
            img.onload = function() {
                ctx.clearRect(0, 0, size, size);
                ctx.drawImage(img, 0, 0, size, size);
                URL.revokeObjectURL(url);
                
                const link = document.createElement('a');
                link.download = `pwa-${size}.png`;
                link.href = canvas.toDataURL('image/png');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            };
            img.src = url;
        }
    </script>
</body>
</html>